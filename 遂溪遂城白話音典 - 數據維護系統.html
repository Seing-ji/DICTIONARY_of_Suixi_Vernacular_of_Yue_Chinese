<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‚æºªé‚åŸç™½è©±éŸ³å…¸ - æ•¸æ“šç¶­è­·ç³»çµ±</title>
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #6b8cbc;
            --background-color: #f5f7fa;
            --text-color: #333;
            --border-color: #ddd;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --success-color: #28a745;
            --warning-color: #ffc107;
            --error-color: #dc3545;
            --audio-color: #17a2b8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Times New Roman', 'Iansui', serif;
        }
        
        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
            font-family: 'Iansui', 'Times New Roman', serif;
        }
        
        .maintenance-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .description {
            font-size: 1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto 15px;
        }
        
        /* æ§åˆ¶æŒ‰é’®åŒºåŸŸ */
        .control-panel {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .header-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s;
            font-family: 'Times New Roman', 'Iansui', serif;
        }
        
        .header-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 25px;
            padding: 25px;
            min-height: 600px;
        }
        
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        /* ç¼–è¾‘åŒºåŸŸ - å‚è€ƒè¯å…¸æ ·å¼ */
        .edit-section {
            background: #f9fafc;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .edit-section h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
            font-size: 1.5rem;
            text-align: center;
        }
        
        /* è¡¨å•æ ·å¼ - å‚è€ƒè¯å…¸æ ·å¼ */
        .form-group {
            margin-bottom: 18px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: bold;
            color: #555;
            font-size: 1.05rem;
            font-family: 'Iansui', 'Times New Roman', serif;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-size: 1.1rem;
            transition: border-color 0.3s;
            font-family: 'Times New Roman', 'Iansui', serif;
            background: white;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(74, 111, 165, 0.1);
        }
        
        .form-group textarea {
            min-height: 90px;
            resize: vertical;
        }
        
        /* æ±‰å­—æ˜¾ç¤º - å‚è€ƒè¯å…¸ */
        .character-display {
            font-size: 3rem;
            font-weight: bold;
            text-align: center;
            color: var(--primary-color);
            margin: 15px 0;
            background-color: #fff9c4;
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #ffeaa7;
            font-family: 'Iansui', 'Times New Roman', serif;
        }
        
        /* éŸ³é¢‘ä¸Šä¼ åŒºåŸŸ */
        .audio-section {
            border: 2px dashed #ccc;
            border-radius: 8px;
            padding: 15px;
            background: #f8f9fa;
            margin: 15px 0;
        }
        
        .audio-section:hover {
            border-color: var(--audio-color);
        }
        
        .audio-section h4 {
            color: var(--audio-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .audio-upload {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .audio-upload input[type="file"] {
            display: none;
        }
        
        .upload-btn {
            background: var(--audio-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: background 0.3s;
        }
        
        .upload-btn:hover {
            background: #138496;
        }
        
        .audio-preview {
            margin-top: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border: 1px solid #eee;
        }
        
        .audio-preview audio {
            width: 100%;
        }
        
        /* æŒ‰é’®ç»„ - å‚è€ƒè¯å…¸ */
        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 25px;
        }
        
        .btn {
            padding: 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.05rem;
            font-weight: 500;
            transition: all 0.3s;
            font-family: 'Times New Roman', 'Iansui', serif;
            text-align: center;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn-success {
            background: var(--success-color);
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn-warning {
            background: var(--warning-color);
            color: #212529;
        }
        
        .btn-warning:hover {
            background: #e0a800;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn-danger {
            background: var(--error-color);
            color: white;
        }
        
        .btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        /* æ•°æ®åˆ—è¡¨åŒºåŸŸ - å‚è€ƒè¯å…¸æ ·å¼ */
        .list-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .list-section h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
            font-size: 1.5rem;
            text-align: center;
        }
        
        /* æœç´¢æ  - å‚è€ƒè¯å…¸ */
        .search-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--border-color);
        }
        
        .search-input {
            flex: 1;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-size: 1.05rem;
            font-family: 'Times New Roman', 'Iansui', serif;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .search-btn {
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.05rem;
            transition: background 0.3s;
        }
        
        .search-btn:hover {
            background: var(--secondary-color);
        }
        
        /* æ•°æ®è¡¨æ ¼ - å‚è€ƒè¯å…¸ */
        .data-table-container {
            overflow-x: auto;
            background: white;
            border-radius: 5px;
            border: 1px solid var(--border-color);
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }
        
        .data-table th {
            background: #f8f9fa;
            color: var(--primary-color);
            padding: 14px 12px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid var(--primary-color);
            font-size: 1.05rem;
        }
        
        .data-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            vertical-align: middle;
        }
        
        .data-table tr:hover {
            background: #f8f9fa;
        }
        
        .data-table tr:last-child td {
            border-bottom: none;
        }
        
        /* æ“ä½œæŒ‰é’® - å‚è€ƒè¯å…¸ */
        .action-buttons {
            display: flex;
            gap: 6px;
        }
        
        .action-btn {
            padding: 6px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            font-family: 'Times New Roman', 'Iansui', serif;
        }
        
        .edit-btn {
            background: var(--warning-color);
            color: #212529;
            border: 1px solid #ffc107;
        }
        
        .edit-btn:hover {
            background: #e0a800;
        }
        
        .delete-btn {
            background: var(--error-color);
            color: white;
            border: 1px solid #dc3545;
        }
        
        .delete-btn:hover {
            background: #c82333;
        }
        
        .play-btn {
            background: var(--audio-color);
            color: white;
            border: 1px solid #17a2b8;
        }
        
        .play-btn:hover {
            background: #138496;
        }
        
        /* çŠ¶æ€ä¿¡æ¯ - å‚è€ƒè¯å…¸é…ç½®åŒºåŸŸ */
        .status-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
            color: #856404;
        }
        
        .status-info h3 {
            margin-bottom: 10px;
            color: #856404;
            font-size: 1.1rem;
            border-bottom: 1px solid #ffeaa7;
            padding-bottom: 5px;
        }
        
        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            background: white;
            border-radius: 10px;
            padding: 25px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: slideUp 0.3s;
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
        }
        
        .modal-header h3 {
            color: var(--primary-color);
            font-size: 1.3rem;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .close-modal:hover {
            background: #f8f9fa;
        }
        
        /* åˆ†é¡µ - å‚è€ƒè¯å…¸ */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .page-btn {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            background: white;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Times New Roman', 'Iansui', serif;
        }
        
        .page-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .page-btn:hover:not(.active) {
            background: #f8f9fa;
        }
        
        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* å¯¼å…¥å¯¼å‡ºåŒºåŸŸ */
        .import-export {
            background: #e9ecef;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .import-export h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .import-export-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .main-content {
                padding: 15px;
                gap: 15px;
            }
            
            .button-group {
                grid-template-columns: 1fr;
            }
            
            .search-bar {
                flex-direction: column;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 4px;
            }
            
            .control-panel {
                flex-direction: column;
                align-items: center;
            }
            
            .header-btn {
                width: 90%;
            }
            
            .character-display {
                font-size: 2.5rem;
            }
        }
        
        /* éŸ³é¢‘çŠ¶æ€ */
        .audio-status {
            font-size: 0.85rem;
            color: #666;
            margin-top: 5px;
        }
        
        .audio-status.ready {
            color: var(--success-color);
        }
        
        .audio-status.error {
            color: var(--error-color);
        }
        
        /* JSONé¢„è§ˆ */
        .json-preview {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            max-height: 150px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        /* GitHubé…ç½®åŒºåŸŸ */
        .github-config {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .github-config h4 {
            color: #1976d2;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .github-info {
            font-size: 0.9rem;
            color: #555;
            margin-top: 5px;
        }
        
        /* ç‰¹æ®Šå­—ç¬¦æç¤º */
        .special-char-hint {
            margin-top: 5px;
            font-size: 0.85rem;
            color: var(--primary-color);
            background: #f0f7ff;
            padding: 5px 8px;
            border-radius: 4px;
            border-left: 3px solid var(--primary-color);
        }
        
        /* æ–‡ä»¶åé¢„è§ˆ */
        .filename-preview {
            margin-top: 8px;
            font-size: 0.9rem;
            color: #666;
            padding: 5px;
            background: #f8f9fa;
            border-radius: 3px;
            border: 1px dashed #dee2e6;
        }
        
        .filename-preview .label {
            color: #555;
            font-weight: bold;
        }
        
        .filename-preview .value {
            color: var(--success-color);
            font-weight: bold;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="maintenance-container">
        <header>
            <h1>é‚æºªé‚åŸç™½è©±éŸ³å…¸ - æ•¸æ“šç¶­è­·ç³»çµ±</h1>
            <p class="description">æ”¯æŒå¢åˆªæ”¹æŸ¥å­—å…¸æ•¸æ“šï¼Œç®¡ç†æ¼¢å­—ã€BVZã€æ³¨é‡‹å’ŒéŸ³é »æ–‡ä»¶</p>
            
            <div class="control-panel">
                <button class="header-btn" id="import-json-btn">å°å…¥JSONæ–‡ä»¶</button>
                <button class="header-btn" id="export-json-btn">å°å‡ºJSONæ–‡ä»¶</button>
                <button class="header-btn" id="load-sample-btn">åŠ è¼‰ç¤ºä¾‹æ•¸æ“š</button>
                <button class="header-btn" id="clear-all-btn">æ¸…ç©ºæ‰€æœ‰æ•¸æ“š</button>
            </div>
        </header>
        
        <div class="main-content">
            <!-- å·¦ä¾§ï¼šç¼–è¾‘åŒºåŸŸ -->
            <section class="edit-section">
                <h2>æ•¸æ“šç·¨è¼¯</h2>
                
                <div class="character-display" id="character-display">å­—</div>
                
                <div class="form-group">
                    <label for="character-input">æ¼¢å­— (å–®å­—)</label>
                    <input type="text" id="character-input" placeholder="è¼¸å…¥æ¼¢å­—ï¼Œå¦‚ï¼šæ±">
                </div>
                
                <div class="form-group">
                    <label for="bvz-input">ç™½è©±å­— (BVZ)</label>
                    <input type="text" id="bvz-input" placeholder="è¼¸å…¥BVZæ‹¼éŸ³ï¼Œå¦‚ï¼šdÅng" style="font-size: 1.2rem;">
                    <div class="special-char-hint">
                        ğŸ’¡ æ”¯æŒä¸¦ä¿ç•™ç‰¹æ®Šå­—ç¬¦ï¼šáº¥ Ã£ áº« áº£ Äƒ Ã¢ Ä‘ Ãª Ã´ Æ¡ Æ° ç­‰è¶Šå—èªå­—ç¬¦
                    </div>
                    <div class="filename-preview" id="filename-preview" style="display: none;">
                        <span class="label">ç”Ÿæˆæ–‡ä»¶åï¼š</span><span class="value" id="filename-value"></span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="note-input">æ³¨é‡‹</label>
                    <textarea id="note-input" placeholder="è¼¸å…¥æ³¨é‡‹ï¼Œå¦‚ï¼šæ–¹å‘"></textarea>
                </div>
                
                <div class="audio-section">
                    <h4>éŸ³é »ç®¡ç†</h4>
                    
                    <div class="form-group">
                        <label for="audio-url-input">éŸ³é »URL</label>
                        <input type="text" id="audio-url-input" placeholder="https://.../audio.mp3">
                        <div class="github-info" id="github-url-info"></div>
                    </div>
                    
                    <div class="audio-upload">
                        <input type="file" id="audio-file-input" accept="audio/*">
                        <label for="audio-file-input" class="upload-btn">é¸æ“‡éŸ³é »æ–‡ä»¶</label>
                        <span id="audio-file-name" style="font-size: 0.9rem; color: #666;"></span>
                    </div>
                    
                    <div class="audio-preview" id="audio-preview" style="display: none;">
                        <audio controls id="audio-player">
                            æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æŒéŸ³é »æ’­æ”¾
                        </audio>
                        <div class="audio-status" id="audio-preview-status"></div>
                    </div>
                </div>
                
                <div class="github-config">
                    <h4>GitHubéŸ³é »é…ç½®</h4>
                    <div class="form-group">
                        <label for="github-username">GitHubç”¨æˆ¶å</label>
                        <input type="text" id="github-username" value="Seing-ji">
                    </div>
                    <div class="form-group">
                        <label for="github-repo">éŸ³é »å€‰åº«å</label>
                        <input type="text" id="github-repo" value="BVZ_Audio_for_editing">
                    </div>
                    <div class="github-info">
                        éŸ³é »URLæ ¼å¼ï¼šhttps://raw.githubusercontent.com/[ç”¨æˆ¶å]/[å€‰åº«å]/main/[æ–‡ä»¶å].mp3<br>
                        <strong>æ³¨æ„ï¼š</strong>ç‰¹æ®Šå­—ç¬¦æœƒç›´æ¥ä½¿ç”¨ï¼Œä¸é€²è¡ŒURLç·¨ç¢¼
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-primary" id="add-btn">æ–°å¢è¨˜éŒ„</button>
                    <button class="btn btn-success" id="update-btn" disabled>æ›´æ–°è¨˜éŒ„</button>
                    <button class="btn btn-warning" id="clear-btn">æ¸…ç©ºè¡¨å–®</button>
                    <button class="btn btn-danger" id="delete-btn" disabled>åˆªé™¤è¨˜éŒ„</button>
                </div>
                
                <div class="status-info">
                    <h3>æ“ä½œèªªæ˜</h3>
                    <p>â€¢ æ–°å¢è¨˜éŒ„ï¼šå¡«å¯«å®Œæ•´ä¿¡æ¯å¾Œé»æ“Š"æ–°å¢è¨˜éŒ„"</p>
                    <p>â€¢ ç·¨è¼¯è¨˜éŒ„ï¼šåœ¨å³å´åˆ—è¡¨é»æ“Š"ç·¨è¼¯"æŒ‰éˆ•</p>
                    <p>â€¢ æ›´æ–°è¨˜éŒ„ï¼šç·¨è¼¯å¾Œé»æ“Š"æ›´æ–°è¨˜éŒ„"ä¿å­˜ä¿®æ”¹</p>
                    <p>â€¢ åˆªé™¤è¨˜éŒ„ï¼šé¸æ“‡è¨˜éŒ„å¾Œé»æ“Š"åˆªé™¤è¨˜éŒ„"</p>
                    <p>â€¢ <strong>BVZç‰¹æ®Šå­—ç¬¦ï¼š</strong>ç³»çµ±æœƒç›´æ¥ä½¿ç”¨áº¥/Ã£/áº«/áº£ç­‰åŸå§‹å­—ç¬¦ï¼Œä¸é€²è¡ŒURLç·¨ç¢¼</p>
                </div>
            </section>
            
            <!-- å³ä¾§ï¼šæ•°æ®åˆ—è¡¨åŒºåŸŸ -->
            <section class="list-section">
                <h2>æ•¸æ“šåˆ—è¡¨</h2>
                
                <div class="search-bar">
                    <input type="text" class="search-input" id="list-search" placeholder="æœç´¢æ¼¢å­—ã€BVZæˆ–æ³¨é‡‹...">
                    <button class="search-btn" id="search-btn">æœç´¢</button>
                </div>
                
                <div class="data-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th style="width: 15%;">æ¼¢å­—</th>
                                <th style="width: 20%;">BVZ</th>
                                <th style="width: 35%;">æ³¨é‡‹</th>
                                <th style="width: 20%;">éŸ³é »</th>
                                <th style="width: 10%;">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="data-table-body">
                            <!-- æ•°æ®è¡Œå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            <tr>
                                <td colspan="5" style="text-align: center; padding: 40px;">
                                    æ­£åœ¨åŠ è¼‰æ•¸æ“š...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination" id="pagination">
                    <!-- åˆ†é¡µæŒ‰é’®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="status-info">
                    <h3>æ•¸æ“šçµ±è¨ˆ</h3>
                    <div id="data-stats">æ­£åœ¨çµ±è¨ˆ...</div>
                </div>
                
                <div class="import-export">
                    <h4>æ•¸æ“šå°å…¥/å°å‡º</h4>
                    <div class="import-export-buttons">
                        <button class="btn" id="import-local-btn">å¾JSONå°å…¥</button>
                        <button class="btn btn-primary" id="export-local-btn">å°å‡ºç‚ºJSON</button>
                        <button class="btn btn-success" id="export-csv-btn">å°å‡ºç‚ºCSV</button>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- å¯¼å…¥JSONæ¨¡æ€æ¡† -->
        <div class="modal" id="import-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>å°å…¥JSONæ•¸æ“š</h3>
                    <button class="close-modal" id="close-import-modal">&times;</button>
                </div>
                <p>é¸æ“‡å°å…¥æ–¹å¼ï¼š</p>
                <div style="margin: 15px 0;">
                    <input type="file" id="json-file-input" accept=".json" style="display: none;">
                    <button class="btn" id="select-json-file" style="margin-right: 10px;">é¸æ“‡JSONæ–‡ä»¶</button>
                    <button class="btn btn-primary" id="paste-json">ç²˜è²¼JSONæ•¸æ“š</button>
                </div>
                
                <div id="json-preview-container" style="display: none;">
                    <h4>æ•¸æ“šé è¦½</h4>
                    <div class="json-preview" id="json-preview"></div>
                    <div style="margin-top: 10px;">
                        <label>
                            <input type="checkbox" id="merge-data" checked>
                            åˆä½µåˆ°ç¾æœ‰æ•¸æ“šï¼ˆä¸å‹¾é¸å‰‡æ›¿æ›æ‰€æœ‰æ•¸æ“šï¼‰
                        </label>
                    </div>
                    <div style="margin-top: 15px; display: flex; gap: 10px;">
                        <button class="btn btn-success" id="confirm-import">ç¢ºèªå°å…¥</button>
                        <button class="btn" id="cancel-import">å–æ¶ˆ</button>
                    </div>
                </div>
                
                <div id="json-paste-container" style="display: none; margin-top: 15px;">
                    <h4>ç²˜è²¼JSONæ•¸æ“š</h4>
                    <textarea id="json-textarea" style="width: 100%; height: 150px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-family: monospace;" placeholder="åœ¨æ­¤ç²˜è²¼JSONæ•¸æ“š..."></textarea>
                    <div style="margin-top: 10px; display: flex; gap: 10px;">
                        <button class="btn btn-success" id="confirm-paste">å°å…¥æ•¸æ“š</button>
                        <button class="btn" id="cancel-paste">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- åˆ é™¤ç¡®è®¤æ¨¡æ€æ¡† -->
        <div class="modal" id="delete-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ç¢ºèªåˆªé™¤</h3>
                    <button class="close-modal" id="close-delete-modal">&times;</button>
                </div>
                <p>ç¢ºå®šè¦åˆªé™¤é€™æ¢è¨˜éŒ„å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•æ’¤éŠ·ã€‚</p>
                <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end;">
                    <button class="btn" id="cancel-delete">å–æ¶ˆ</button>
                    <button class="btn btn-danger" id="confirm-delete">ç¢ºå®šåˆªé™¤</button>
                </div>
            </div>
        </div>
        
        <!-- æ¸…ç©ºæ•°æ®ç¡®è®¤æ¨¡æ€æ¡† -->
        <div class="modal" id="clear-all-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ç¢ºèªæ¸…ç©ºæ‰€æœ‰æ•¸æ“š</h3>
                    <button class="close-modal" id="close-clear-modal">&times;</button>
                </div>
                <p>ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰æ•¸æ“šå—ï¼Ÿæ­¤æ“ä½œç„¡æ³•æ’¤éŠ·ã€‚</p>
                <p style="color: var(--error-color); margin-top: 10px;">å°‡æœƒåˆªé™¤æ‰€æœ‰è¨˜éŒ„ï¼</p>
                <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end;">
                    <button class="btn" id="cancel-clear">å–æ¶ˆ</button>
                    <button class="btn btn-danger" id="confirm-clear">ç¢ºå®šæ¸…ç©º</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // é…ç½®
        const CONFIG = {
            STORAGE_KEY: 'suixi_dictionary_data',
            ITEMS_PER_PAGE: 10,
            MAX_FILE_SIZE: 5 * 1024 * 1024, // 5MB
            SUPPORTED_AUDIO_TYPES: ['audio/mpeg', 'audio/wav', 'audio/ogg', 'audio/webm', 'audio/x-m4a']
        };
        
        // å…¨å±€å˜é‡
        let dictionaryData = [];
        let currentPage = 1;
        let totalPages = 1;
        let currentSearch = '';
        let currentEditId = null;
        let audioFile = null;
        
        // DOMå…ƒç´ 
        const characterInput = document.getElementById('character-input');
        const bvzInput = document.getElementById('bvz-input');
        const filenamePreview = document.getElementById('filename-preview');
        const filenameValue = document.getElementById('filename-value');
        const noteInput = document.getElementById('note-input');
        const audioUrlInput = document.getElementById('audio-url-input');
        const audioFileInput = document.getElementById('audio-file-input');
        const audioFileName = document.getElementById('audio-file-name');
        const audioPlayer = document.getElementById('audio-player');
        const audioPreview = document.getElementById('audio-preview');
        const audioPreviewStatus = document.getElementById('audio-preview-status');
        const characterDisplay = document.getElementById('character-display');
        const githubUsernameInput = document.getElementById('github-username');
        const githubRepoInput = document.getElementById('github-repo');
        const githubUrlInfo = document.getElementById('github-url-info');
        
        const addBtn = document.getElementById('add-btn');
        const updateBtn = document.getElementById('update-btn');
        const clearBtn = document.getElementById('clear-btn');
        const deleteBtn = document.getElementById('delete-btn');
        
        const dataTableBody = document.getElementById('data-table-body');
        const pagination = document.getElementById('pagination');
        const dataStats = document.getElementById('data-stats');
        const listSearch = document.getElementById('list-search');
        const searchBtn = document.getElementById('search-btn');
        
        // å¯¼å…¥å¯¼å‡ºæŒ‰é’®
        const importJsonBtn = document.getElementById('import-json-btn');
        const exportJsonBtn = document.getElementById('export-json-btn');
        const loadSampleBtn = document.getElementById('load-sample-btn');
        const clearAllBtn = document.getElementById('clear-all-btn');
        const importLocalBtn = document.getElementById('import-local-btn');
        const exportLocalBtn = document.getElementById('export-local-btn');
        const exportCsvBtn = document.getElementById('export-csv-btn');
        
        // æ¨¡æ€æ¡†
        const importModal = document.getElementById('import-modal');
        const closeImportModal = document.getElementById('close-import-modal');
        const selectJsonFile = document.getElementById('select-json-file');
        const pasteJson = document.getElementById('paste-json');
        const jsonFileInput = document.getElementById('json-file-input');
        const jsonPreviewContainer = document.getElementById('json-preview-container');
        const jsonPreview = document.getElementById('json-preview');
        const confirmImport = document.getElementById('confirm-import');
        const cancelImport = document.getElementById('cancel-import');
        const jsonPasteContainer = document.getElementById('json-paste-container');
        const jsonTextarea = document.getElementById('json-textarea');
        const confirmPaste = document.getElementById('confirm-paste');
        const cancelPaste = document.getElementById('cancel-paste');
        
        const deleteModal = document.getElementById('delete-modal');
        const closeDeleteModal = document.getElementById('close-delete-modal');
        const cancelDelete = document.getElementById('cancel-delete');
        const confirmDelete = document.getElementById('confirm-delete');
        
        const clearAllModal = document.getElementById('clear-all-modal');
        const closeClearModal = document.getElementById('close-clear-modal');
        const cancelClear = document.getElementById('cancel-clear');
        const confirmClear = document.getElementById('confirm-clear');
        
        // åˆå§‹åŒ–
        async function init() {
            await loadDictionaryData();
            setupEventListeners();
            renderDataTable();
            updateStats();
            
            // ç›‘å¬æ±‰å­—è¾“å…¥ï¼Œæ›´æ–°æ˜¾ç¤º
            characterInput.addEventListener('input', updateCharacterDisplay);
            bvzInput.addEventListener('input', () => {
                updateGitHubUrlPreview();
                updateFilenamePreview();
            });
            githubUsernameInput.addEventListener('input', updateGitHubUrlPreview);
            githubRepoInput.addEventListener('input', updateGitHubUrlPreview);
            
            updateCharacterDisplay();
            updateGitHubUrlPreview();
            updateFilenamePreview();
        }
        
        // æ›´æ–°æ–‡ä»¶åé¢„è§ˆ
        function updateFilenamePreview() {
            const bvz = bvzInput.value.trim();
            
            if (bvz) {
                // ä½¿ç”¨åŸå§‹å­—ç¬¦ï¼Œåªè¿›è¡Œæœ€å°æ¸…ç†ï¼ˆç§»é™¤è·¯å¾„åˆ†éš”ç¬¦ç­‰ï¼‰
                const cleaned = cleanFilenameForUrl(bvz);
                filenameValue.textContent = cleaned + '.mp3';
                filenamePreview.style.display = 'block';
                
                // æ£€æŸ¥æ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦
                const hasSpecialChars = /[áº¥Ã£áº«áº£ÄƒÃ¢Ä‘ÃªÃ´Æ¡Æ°]/i.test(bvz);
                if (hasSpecialChars) {
                    filenamePreview.style.backgroundColor = '#f0f9ff';
                    filenamePreview.style.borderColor = '#b3e0ff';
                    filenameValue.style.color = 'var(--primary-color)';
                } else {
                    filenameValue.style.color = 'var(--success-color)';
                }
            } else {
                filenamePreview.style.display = 'none';
            }
        }
        
        // æ¸…ç†æ–‡ä»¶åï¼ˆä¿ç•™ç‰¹æ®Šå­—ç¬¦ï¼‰
        function cleanFilenameForUrl(filename) {
            if (!filename) return '';
            
            // åªç§»é™¤å¯èƒ½å½±å“æ–‡ä»¶ç³»ç»Ÿçš„å­—ç¬¦ï¼Œä¿ç•™æ‰€æœ‰è¯­è¨€çš„ç‰¹æ®Šå­—ç¬¦
            // ä¿ç•™ï¼šå­—æ¯ã€æ•°å­—ã€è¶Šå—è¯­å­—ç¬¦ã€ä¸­æ–‡ã€è¿å­—ç¬¦ã€ä¸‹åˆ’çº¿ã€ç‚¹
            // ç§»é™¤ï¼šè·¯å¾„åˆ†éš”ç¬¦ã€æ§åˆ¶å­—ç¬¦ç­‰
            let cleaned = filename
                .replace(/[\/\\:*?"<>|]/g, '_')  // ç§»é™¤æ–‡ä»¶ç³»ç»Ÿä¸å…è®¸çš„å­—ç¬¦
                .replace(/\s+/g, '_')             // ç©ºæ ¼æ›¿æ¢ä¸ºä¸‹åˆ’çº¿
                .replace(/_{2,}/g, '_')           // å¤šä¸ªä¸‹åˆ’çº¿åˆå¹¶ä¸ºä¸€ä¸ª
                .replace(/^_+|_+$/g, '');         // ç§»é™¤å¼€å¤´å’Œç»“å°¾çš„ä¸‹åˆ’çº¿
            
            // ç¡®ä¿é•¿åº¦åˆç†
            if (cleaned.length > 100) {
                cleaned = cleaned.substring(0, 100);
            }
            
            return cleaned;
        }
        
        // æ›´æ–°æ±‰å­—æ˜¾ç¤º
        function updateCharacterDisplay() {
            const char = characterInput.value.trim();
            characterDisplay.textContent = char || 'å­—';
            
            // å¦‚æœåªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œæ”¾å¤§æ˜¾ç¤º
            if (char.length === 1) {
                characterDisplay.style.fontSize = '3.5rem';
            } else {
                characterDisplay.style.fontSize = '3rem';
            }
            
            // æ›´æ–°GitHub URLé¢„è§ˆ
            updateGitHubUrlPreview();
        }
        
        // æ›´æ–°GitHub URLé¢„è§ˆ
        function updateGitHubUrlPreview() {
            const username = githubUsernameInput.value.trim() || 'Seing-ji';
            const repo = githubRepoInput.value.trim() || 'BVZ_Audio_for_editing';
            const bvz = bvzInput.value.trim();
            
            if (bvz) {
                // ä½¿ç”¨åŸå§‹å­—ç¬¦ï¼Œä¸è¿›è¡ŒURLç¼–ç 
                const cleanedBvz = cleanFilenameForUrl(bvz);
                const githubUrl = `https://raw.githubusercontent.com/${username}/${repo}/main/${cleanedBvz}.mp3`;
                
                githubUrlInfo.innerHTML = `ç”ŸæˆURL: <span style="font-family: monospace; color: var(--primary-color);">${githubUrl}</span>`;
                
                // æ˜¾ç¤ºæç¤ºä¿¡æ¯
                const hasSpecialChars = /[áº¥Ã£áº«áº£ÄƒÃ¢Ä‘ÃªÃ´Æ¡Æ°]/i.test(bvz);
                if (hasSpecialChars) {
                    githubUrlInfo.innerHTML += `<br><span style="color: var(--warning-color); font-size: 0.85rem;">
                        ğŸ’¡ åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ŒURLä¸­ç›´æ¥ä½¿ç”¨åŸå§‹å­—ç¬¦
                    </span>`;
                }
                
                // å¦‚æœæœ‰éŸ³é¢‘æ–‡ä»¶å·²é€‰æ‹©ï¼Œæ›´æ–°æ–‡ä»¶åæç¤º
                if (audioFile) {
                    const fileExt = getFileExtension(audioFile.name);
                    audioPreviewStatus.textContent = `å»ºè­°æ–‡ä»¶å: ${cleanedBvz}.${fileExt}`;
                    audioPreviewStatus.className = 'audio-status ready';
                }
            } else {
                githubUrlInfo.textContent = 'è¼¸å…¥BVZå¾Œè‡ªå‹•ç”ŸæˆGitHub URL';
                githubUrlInfo.style.color = '#666';
            }
        }
        
        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // è¡¨å•æŒ‰é’®
            addBtn.addEventListener('click', addRecord);
            updateBtn.addEventListener('click', updateRecord);
            clearBtn.addEventListener('click', clearForm);
            deleteBtn.addEventListener('click', showDeleteModal);
            
            // éŸ³é¢‘æ–‡ä»¶ä¸Šä¼ 
            audioFileInput.addEventListener('change', handleAudioFileUpload);
            audioUrlInput.addEventListener('input', handleAudioUrlInput);
            
            // æœç´¢
            searchBtn.addEventListener('click', () => {
                currentSearch = listSearch.value.trim();
                currentPage = 1;
                renderDataTable();
            });
            
            listSearch.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    currentSearch = listSearch.value.trim();
                    currentPage = 1;
                    renderDataTable();
                }
            });
            
            // æ§åˆ¶é¢æ¿æŒ‰é’®
            importJsonBtn.addEventListener('click', () => importModal.style.display = 'flex');
            exportJsonBtn.addEventListener('click', exportToJson);
            loadSampleBtn.addEventListener('click', loadSampleData);
            clearAllBtn.addEventListener('click', () => clearAllModal.style.display = 'flex');
            
            // æœ¬åœ°å¯¼å…¥å¯¼å‡ºæŒ‰é’®
            importLocalBtn.addEventListener('click', () => importModal.style.display = 'flex');
            exportLocalBtn.addEventListener('click', exportToJson);
            exportCsvBtn.addEventListener('click', exportToCsv);
            
            // å¯¼å…¥æ¨¡æ€æ¡†
            closeImportModal.addEventListener('click', () => {
                importModal.style.display = 'none';
                resetImportModal();
            });
            
            selectJsonFile.addEventListener('click', () => jsonFileInput.click());
            jsonFileInput.addEventListener('change', handleJsonFileSelect);
            pasteJson.addEventListener('click', showJsonPaste);
            
            confirmImport.addEventListener('click', confirmJsonImport);
            cancelImport.addEventListener('click', () => {
                jsonPreviewContainer.style.display = 'none';
                jsonFileInput.value = '';
            });
            
            confirmPaste.addEventListener('click', confirmJsonPaste);
            cancelPaste.addEventListener('click', () => {
                jsonPasteContainer.style.display = 'none';
                jsonTextarea.value = '';
            });
            
            // åˆ é™¤æ¨¡æ€æ¡†
            closeDeleteModal.addEventListener('click', () => deleteModal.style.display = 'none');
            cancelDelete.addEventListener('click', () => deleteModal.style.display = 'none');
            confirmDelete.addEventListener('click', deleteRecord);
            
            // æ¸…ç©ºæ•°æ®æ¨¡æ€æ¡†
            closeClearModal.addEventListener('click', () => clearAllModal.style.display = 'none');
            cancelClear.addEventListener('click', () => clearAllModal.style.display = 'none');
            confirmClear.addEventListener('click', clearAllData);
            
            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            window.addEventListener('click', (e) => {
                if (e.target === importModal) {
                    importModal.style.display = 'none';
                    resetImportModal();
                }
                if (e.target === deleteModal) deleteModal.style.display = 'none';
                if (e.target === clearAllModal) clearAllModal.style.display = 'none';
            });
        }
        
        // é‡ç½®å¯¼å…¥æ¨¡æ€æ¡†
        function resetImportModal() {
            jsonPreviewContainer.style.display = 'none';
            jsonPasteContainer.style.display = 'none';
            jsonFileInput.value = '';
            jsonTextarea.value = '';
        }
        
        // å¤„ç†JSONæ–‡ä»¶é€‰æ‹©
        function handleJsonFileSelect(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const jsonData = JSON.parse(e.target.result);
                    displayJsonPreview(jsonData);
                } catch (error) {
                    alert('JSONæ–‡ä»¶æ ¼å¼éŒ¯èª¤: ' + error.message);
                }
            };
            reader.readAsText(file);
        }
        
        // æ˜¾ç¤ºJSONç²˜è´´ç•Œé¢
        function showJsonPaste() {
            jsonPasteContainer.style.display = 'block';
            jsonPreviewContainer.style.display = 'none';
        }
        
        // æ˜¾ç¤ºJSONé¢„è§ˆ
        function displayJsonPreview(jsonData) {
            jsonPreview.textContent = JSON.stringify(jsonData, null, 2);
            jsonPreviewContainer.style.display = 'block';
            jsonPasteContainer.style.display = 'none';
        }
        
        // ç¡®è®¤å¯¼å…¥JSON
        function confirmJsonImport() {
            try {
                const jsonText = jsonPreview.textContent;
                const jsonData = JSON.parse(jsonText);
                importJsonData(jsonData);
            } catch (error) {
                alert('JSONæ•¸æ“šæ ¼å¼éŒ¯èª¤: ' + error.message);
            }
        }
        
        // ç¡®è®¤ç²˜è´´å¯¼å…¥
        function confirmJsonPaste() {
            try {
                const jsonText = jsonTextarea.value;
                if (!jsonText.trim()) {
                    alert('è«‹è¼¸å…¥JSONæ•¸æ“š');
                    return;
                }
                const jsonData = JSON.parse(jsonText);
                importJsonData(jsonData);
            } catch (error) {
                alert('JSONæ•¸æ“šæ ¼å¼éŒ¯èª¤: ' + error.message);
            }
        }
        
        // å¯¼å…¥JSONæ•°æ®
        function importJsonData(jsonData) {
            if (!Array.isArray(jsonData)) {
                alert('JSONæ•¸æ“šå¿…é ˆæ˜¯æ•¸çµ„æ ¼å¼');
                return;
            }
            
            // éªŒè¯æ•°æ®ç»“æ„
            const validData = jsonData.filter(item => {
                return item && (item.å–®å­— || item.BVZ);
            }).map(item => {
                return {
                    id: generateId(),
                    å–®å­—: item.å–®å­— || '',
                    BVZ: item.BVZ || '',
                    Note: item.Note || item.note || '',
                    Audio: item.Audio || item.audio || ''
                };
            });
            
            if (validData.length === 0) {
                alert('æœªæ‰¾åˆ°æœ‰æ•ˆçš„æ•¸æ“š');
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦åˆå¹¶æ•°æ®
            const merge = document.getElementById('merge-data').checked;
            
            if (merge) {
                // åˆå¹¶æ•°æ®ï¼Œé¿å…é‡å¤
                const existingCharacters = new Set(dictionaryData.map(item => item.å–®å­—));
                const newData = validData.filter(item => !existingCharacters.has(item.å–®å­—));
                
                dictionaryData = [...dictionaryData, ...newData];
                alert(`æˆåŠŸå°å…¥ ${newData.length} æ¢æ–°è¨˜éŒ„ï¼ˆè·³é ${validData.length - newData.length} æ¢é‡è¤‡è¨˜éŒ„ï¼‰`);
            } else {
                // æ›¿æ¢æ‰€æœ‰æ•°æ®
                dictionaryData = validData;
                alert(`æˆåŠŸå°å…¥ ${validData.length} æ¢è¨˜éŒ„`);
            }
            
            // ä¿å­˜å¹¶åˆ·æ–°
            if (saveData()) {
                importModal.style.display = 'none';
                resetImportModal();
                currentPage = 1;
                renderDataTable();
                updateStats();
            }
        }
        
        // åŠ è½½ç¤ºä¾‹æ•°æ®
        function loadSampleData() {
            if (dictionaryData.length > 0 && !confirm('ç•¶å‰å·²æœ‰æ•¸æ“šï¼Œæ˜¯å¦ç”¨ç¤ºä¾‹æ•¸æ“šæ›¿æ›ï¼Ÿ')) {
                return;
            }
            
            dictionaryData = getSampleData();
            if (saveData()) {
                currentPage = 1;
                renderDataTable();
                updateStats();
                alert('ç¤ºä¾‹æ•¸æ“šåŠ è¼‰æˆåŠŸï¼');
            }
        }
        
        // æ¸…ç©ºæ‰€æœ‰æ•°æ®
        function clearAllData() {
            dictionaryData = [];
            if (saveData()) {
                clearAllModal.style.display = 'none';
                clearForm();
                currentPage = 1;
                renderDataTable();
                updateStats();
                alert('æ‰€æœ‰æ•¸æ“šå·²æ¸…ç©ºï¼');
            }
        }
        
        // åŠ è½½å­—å…¸æ•°æ®
        async function loadDictionaryData() {
            try {
                const savedData = localStorage.getItem(CONFIG.STORAGE_KEY);
                
                if (savedData) {
                    dictionaryData = JSON.parse(savedData);
                } else {
                    dictionaryData = getSampleData();
                    saveData();
                }
                
                console.log(`å·²åŠ è¼‰ ${dictionaryData.length} æ¢è¨˜éŒ„`);
            } catch (error) {
                console.error('åŠ è¼‰æ•¸æ“šå¤±æ•—:', error);
                dictionaryData = [];
            }
        }
        
        // è·å–ç¤ºä¾‹æ•°æ®ï¼ˆåŒ…å«ç‰¹æ®Šå­—ç¬¦ç¤ºä¾‹ï¼‰
        function getSampleData() {
            return [
                {
                    id: generateId(),
                    å–®å­—: "æ±",
                    BVZ: "dÅng",
                    Note: "æ–¹å‘ï¼Œå¤ªé™½å‡èµ·çš„æ–¹å‘",
                    Audio: "https://cdn.jsdelivr.net/gh/Seing-ji/BVZ_Audio_for_editing/dÅng.mp3"
                },
                {
                    id: generateId(),
                    å–®å­—: "å®‰",
                    BVZ: "áº¥n",
                    Note: "å¹³éœï¼Œå®‰å…¨",
                    Audio: "https://cdn.jsdelivr.net/gh/Seing-ji/BVZ_Audio_for_editing/áº¥n.mp3"
                },
                {
                    id: generateId(),
                    å–®å­—: "é›¨",
                    BVZ: "á»§",
                    Note: "é™æ°´",
                    Audio: "https://cdn.jsdelivr.net/gh/Seing-ji/BVZ_Audio_for_editing/á»§.mp3"
                },
                {
                    id: generateId(),
                    å–®å­—: "å®¶",
                    BVZ: "gia",
                    Note: "å®¶åº­",
                    Audio: ""
                },
                {
                    id: generateId(),
                    å–®å­—: "èª",
                    BVZ: "ngá»¯",
                    Note: "èªè¨€",
                    Audio: "https://cdn.jsdelivr.net/gh/Seing-ji/BVZ_Audio_for_editing/ngá»¯.mp3"
                },
                {
                    id: generateId(),
                    å–®å­—: "è©¦",
                    BVZ: "thÃ­",
                    Note: "æ¸¬è©¦",
                    Audio: ""
                }
            ];
        }
        
        // ä¿å­˜æ•°æ®åˆ°LocalStorage
        function saveData() {
            try {
                localStorage.setItem(CONFIG.STORAGE_KEY, JSON.stringify(dictionaryData));
                console.log('æ•¸æ“šå·²ä¿å­˜');
                return true;
            } catch (error) {
                console.error('ä¿å­˜æ•¸æ“šå¤±æ•—:', error);
                alert('ä¿å­˜æ•¸æ“šå¤±æ•—ï¼Œè«‹æª¢æŸ¥ç€è¦½å™¨å­˜å„²ç©ºé–“');
                return false;
            }
        }
        
        // ç”Ÿæˆå”¯ä¸€ID
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }
        
        // è·å–æ–‡ä»¶æ‰©å±•å
        function getFileExtension(filename) {
            return filename.split('.').pop().toLowerCase();
        }
        
        // å¤„ç†éŸ³é¢‘æ–‡ä»¶ä¸Šä¼ 
        function handleAudioFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // æ£€æŸ¥æ–‡ä»¶å¤§å°
            if (file.size > CONFIG.MAX_FILE_SIZE) {
                alert(`æ–‡ä»¶å¤ªå¤§ï¼æœ€å¤§æ”¯æŒ ${CONFIG.MAX_FILE_SIZE / 1024 / 1024}MB`);
                audioFileInput.value = '';
                return;
            }
            
            // æ£€æŸ¥æ–‡ä»¶ç±»å‹
            if (!CONFIG.SUPPORTED_AUDIO_TYPES.includes(file.type)) {
                alert('ä¸æ”¯æŒçš„éŸ³é »æ ¼å¼ï¼è«‹ä¸Šå‚³ MP3ã€WAV æˆ– OGG æ–‡ä»¶');
                audioFileInput.value = '';
                return;
            }
            
            audioFile = file;
            audioFileName.textContent = file.name;
            
            // è·å–GitHubé…ç½®
            const username = githubUsernameInput.value.trim() || 'Seing-ji';
            const repo = githubRepoInput.value.trim() || 'BVZ_Audio_for_editing';
            const bvz = bvzInput.value.trim();
            
            if (bvz) {
                // å¯¹BVZè¿›è¡Œæœ€å°æ¸…ç†ï¼Œä¿ç•™ç‰¹æ®Šå­—ç¬¦
                const cleanedBvz = cleanFilenameForUrl(bvz);
                
                // è·å–æ–‡ä»¶æ‰©å±•å
                const fileExt = getFileExtension(file.name);
                
                // ç”ŸæˆGitHub URLï¼ˆä½¿ç”¨åŸå§‹å­—ç¬¦ï¼‰
                const githubUrl = `https://raw.githubusercontent.com/${username}/${repo}/main/${cleanedBvz}.${fileExt}`;
                
                // è‡ªåŠ¨å¡«å……åˆ°URLè¾“å…¥æ¡†
                audioUrlInput.value = githubUrl;
                handleAudioUrlInput(); // è§¦å‘URLè¾“å…¥å¤„ç†
                
                // æ˜¾ç¤ºæç¤º
                audioPreviewStatus.textContent = `å·²ç”ŸæˆGitHub URLã€‚è«‹å°‡æ–‡ä»¶å‘½åç‚º: ${cleanedBvz}.${fileExt}`;
                audioPreviewStatus.className = 'audio-status ready';
                
                // æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦
                const hasSpecialChars = /[áº¥Ã£áº«áº£ÄƒÃ¢Ä‘ÃªÃ´Æ¡Æ°]/i.test(bvz);
                if (hasSpecialChars) {
                    audioPreviewStatus.innerHTML += `<br><span style="color: var(--warning-color);">
                        âš ï¸ æ–‡ä»¶ååŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œè«‹ç¢ºä¿æ–‡ä»¶ç³»çµ±æ”¯æŒé€™äº›å­—ç¬¦
                    </span>`;
                }
            } else {
                // å¦‚æœæ²¡æœ‰BVZï¼Œä½¿ç”¨æœ¬åœ°é¢„è§ˆ
                const objectUrl = URL.createObjectURL(file);
                audioPlayer.src = objectUrl;
                audioPreview.style.display = 'block';
                audioPreviewStatus.textContent = `å·²é¸æ“‡: ${file.name} (${(file.size / 1024).toFixed(1)}KB) - è«‹å¡«å¯«BVZä»¥ç”ŸæˆGitHub URL`;
                audioPreviewStatus.className = 'audio-status';
                audioPlayer.load();
            }
        }
        
        // å¤„ç†éŸ³é¢‘URLè¾“å…¥
        function handleAudioUrlInput() {
            const url = audioUrlInput.value.trim();
            if (url) {
                audioFile = null;
                audioFileInput.value = '';
                audioFileName.textContent = '';
                
                // éªŒè¯URL
                try {
                    new URL(url);
                    audioPlayer.src = url;
                    audioPreview.style.display = 'block';
                    
                    // æ£€æŸ¥URLæ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦
                    const hasSpecialChars = /[áº¥Ã£áº«áº£ÄƒÃ¢Ä‘ÃªÃ´Æ¡Æ°]/i.test(url);
                    
                    if (hasSpecialChars) {
                        audioPreviewStatus.innerHTML = `URL: ${url}<br><span style="color: var(--warning-color);">
                            âš ï¸ URLåŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œè«‹ç¢ºä¿æœå‹™å™¨æ”¯æŒ
                        </span>`;
                    } else {
                        audioPreviewStatus.textContent = `URL: ${url}`;
                    }
                    
                    audioPreviewStatus.className = 'audio-status ready';
                    audioPlayer.load();
                } catch (error) {
                    audioPreviewStatus.textContent = 'ç„¡æ•ˆçš„URLæ ¼å¼';
                    audioPreviewStatus.className = 'audio-status error';
                }
            } else {
                audioPreview.style.display = 'none';
            }
        }
        
        // éªŒè¯è¡¨å•
        function validateForm() {
            const character = characterInput.value.trim();
            const bvz = bvzInput.value.trim();
            const audioUrl = audioUrlInput.value.trim();
            
            if (!character) {
                alert('è«‹è¼¸å…¥æ¼¢å­—');
                characterInput.focus();
                return false;
            }
            
            if (!bvz) {
                alert('è«‹è¼¸å…¥BVZæ‹¼éŸ³');
                bvzInput.focus();
                return false;
            }
            
            // æ£€æŸ¥BVZæ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦
            const hasSpecialChars = /[áº¥Ã£áº«áº£ÄƒÃ¢Ä‘ÃªÃ´Æ¡Æ°]/i.test(bvz);
            if (hasSpecialChars) {
                // æ˜¾ç¤ºæé†’ä½†ä¸é˜»æ­¢æäº¤
                console.log(`BVZåŒ…å«ç‰¹æ®Šå­—ç¬¦: ${bvz}ï¼ŒURLå°‡ç›´æ¥ä½¿ç”¨åŸå§‹å­—ç¬¦`);
            }
            
            // å¦‚æœæœ‰éŸ³é¢‘URLä½†æ ¼å¼ä¸æ­£ç¡®ï¼Œæç¤º
            if (audioUrl && !audioUrl.startsWith('http')) {
                if (!confirm('éŸ³é¢‘URLä¸æ˜¯æœ‰æ•ˆçš„ç½‘ç»œåœ°å€ã€‚å»ºè®®ä½¿ç”¨GitHub raw URLæ ¼å¼ï¼ˆä»¥https://å¼€å¤´ï¼‰ã€‚æ˜¯å¦ç»§ç»­ï¼Ÿ')) {
                    audioUrlInput.focus();
                    return false;
                }
            }
            
            return true;
        }
        
        // æ·»åŠ è®°å½•
        function addRecord() {
            if (!validateForm()) return;
            
            const character = characterInput.value.trim();
            const bvz = bvzInput.value.trim();
            const note = noteInput.value.trim();
            const audioUrl = audioUrlInput.value.trim();
            
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒæ±‰å­—
            const exists = dictionaryData.some(item => item.å–®å­— === character);
            if (exists) {
                if (!confirm(`æ¼¢å­—"${character}"å·²å­˜åœ¨ï¼Œæ˜¯å¦æ›´æ–°ï¼Ÿ`)) {
                    return;
                }
                // æ‰¾åˆ°å¹¶æ›´æ–°ç°æœ‰è®°å½•
                const existingIndex = dictionaryData.findIndex(item => item.å–®å­— === character);
                dictionaryData[existingIndex] = {
                    ...dictionaryData[existingIndex],
                    BVZ: bvz,
                    Note: note,
                    Audio: audioUrl
                };
            } else {
                // æ·»åŠ æ–°è®°å½•
                const newRecord = {
                    id: generateId(),
                    å–®å­—: character,
                    BVZ: bvz,
                    Note: note,
                    Audio: audioUrl
                };
                
                dictionaryData.unshift(newRecord);
            }
            
            if (saveData()) {
                clearForm();
                renderDataTable();
                updateStats();
                alert('è¨˜éŒ„å·²ä¿å­˜ï¼');
            }
        }
        
        // æ›´æ–°è®°å½•
        function updateRecord() {
            if (!currentEditId) return;
            if (!validateForm()) return;
            
            const index = dictionaryData.findIndex(item => item.id === currentEditId);
            if (index === -1) return;
            
            dictionaryData[index] = {
                ...dictionaryData[index],
                å–®å­—: characterInput.value.trim(),
                BVZ: bvzInput.value.trim(),
                Note: noteInput.value.trim(),
                Audio: audioUrlInput.value.trim()
            };
            
            if (saveData()) {
                clearForm();
                renderDataTable();
                updateStats();
                alert('è¨˜éŒ„å·²æ›´æ–°ï¼');
            }
        }
        
        // æ¸…ç©ºè¡¨å•
        function clearForm() {
            characterInput.value = '';
            bvzInput.value = '';
            noteInput.value = '';
            audioUrlInput.value = '';
            audioFileInput.value = '';
            audioFileName.textContent = '';
            audioPreview.style.display = 'none';
            audioFile = null;
            
            // é‡ç½®æŒ‰é’®çŠ¶æ€
            updateBtn.disabled = true;
            deleteBtn.disabled = true;
            addBtn.disabled = false;
            
            currentEditId = null;
            
            updateCharacterDisplay();
            updateGitHubUrlPreview();
            updateFilenamePreview();
            characterInput.focus();
        }
        
        // ç¼–è¾‘è®°å½•
        function editRecord(id) {
            const record = dictionaryData.find(item => item.id === id);
            if (!record) return;
            
            characterInput.value = record.å–®å­— || '';
            bvzInput.value = record.BVZ || '';
            noteInput.value = record.Note || '';
            
            if (record.Audio) {
                audioUrlInput.value = record.Audio;
                handleAudioUrlInput();
            } else {
                audioUrlInput.value = '';
                audioPreview.style.display = 'none';
            }
            
            currentEditId = id;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            updateBtn.disabled = false;
            deleteBtn.disabled = false;
            addBtn.disabled = true;
            
            updateCharacterDisplay();
            updateGitHubUrlPreview();
            updateFilenamePreview();
            characterInput.focus();
        }
        
        // æ˜¾ç¤ºåˆ é™¤ç¡®è®¤æ¨¡æ€æ¡†
        function showDeleteModal() {
            if (!currentEditId) return;
            
            const record = dictionaryData.find(item => item.id === currentEditId);
            if (record) {
                deleteModal.style.display = 'flex';
            }
        }
        
        // åˆ é™¤è®°å½•
        function deleteRecord() {
            if (!currentEditId) return;
            
            const index = dictionaryData.findIndex(item => item.id === currentEditId);
            if (index === -1) return;
            
            dictionaryData.splice(index, 1);
            
            if (saveData()) {
                deleteModal.style.display = 'none';
                clearForm();
                renderDataTable();
                updateStats();
                alert('è¨˜éŒ„å·²åˆªé™¤ï¼');
            }
        }
        
        // æ¸²æŸ“æ•°æ®è¡¨æ ¼
        function renderDataTable() {
            // è¿‡æ»¤æ•°æ®
            let filteredData = dictionaryData;
            if (currentSearch) {
                const searchLower = currentSearch.toLowerCase();
                filteredData = dictionaryData.filter(item => 
                    (item.å–®å­— && item.å–®å­—.toLowerCase().includes(searchLower)) ||
                    (item.BVZ && item.BVZ.toLowerCase().includes(searchLower)) ||
                    (item.Note && item.Note.toLowerCase().includes(searchLower))
                );
            }
            
            // è®¡ç®—åˆ†é¡µ
            const startIndex = (currentPage - 1) * CONFIG.ITEMS_PER_PAGE;
            const endIndex = startIndex + CONFIG.ITEMS_PER_PAGE;
            const pageData = filteredData.slice(startIndex, endIndex);
            totalPages = Math.ceil(filteredData.length / CONFIG.ITEMS_PER_PAGE);
            
            // æ¸…ç©ºè¡¨æ ¼
            dataTableBody.innerHTML = '';
            
            if (pageData.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="5" style="text-align: center; padding: 40px;">
                        ${currentSearch ? 'æ²’æœ‰æ‰¾åˆ°åŒ¹é…çš„è¨˜éŒ„' : 'æš«ç„¡æ•¸æ“š'}
                    </td>
                `;
                dataTableBody.appendChild(row);
            } else {
                // æ·»åŠ æ•°æ®è¡Œ
                pageData.forEach(item => {
                    const row = document.createElement('tr');
                    
                    // é™åˆ¶æ³¨é‡Šé•¿åº¦
                    const notePreview = item.Note && item.Note.length > 30 
                        ? item.Note.substring(0, 30) + '...' 
                        : item.Note || '';
                    
                    // æ£€æŸ¥BVZæ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦
                    const hasSpecialChars = item.BVZ && /[áº¥Ã£áº«áº£ÄƒÃ¢Ä‘ÃªÃ´Æ¡Æ°]/i.test(item.BVZ);
                    const bvzCellStyle = hasSpecialChars ? 
                        'font-family: "Times New Roman", "Iansui", serif; font-size: 1.1rem; color: var(--primary-color);' : 
                        'font-family: "Times New Roman", "Iansui", serif; font-size: 1.1rem;';
                    
                    row.innerHTML = `
                        <td><strong>${item.å–®å­— || ''}</strong></td>
                        <td style="${bvzCellStyle}">${item.BVZ || ''}</td>
                        <td title="${item.Note || ''}">${notePreview}</td>
                        <td>
                            ${item.Audio ? 
                                `<button class="action-btn play-btn" onclick="playAudio('${item.Audio}')">æ’­æ”¾</button>` : 
                                '<span style="color: #999; font-size: 0.9rem;">ç„¡éŸ³é »</span>'}
                        </td>
                        <td>
                            <div class="action-buttons">
                                <button class="action-btn edit-btn" onclick="editRecord('${item.id}')">ç·¨è¼¯</button>
                                <button class="action-btn delete-btn" onclick="setDeleteRecord('${item.id}')">åˆªé™¤</button>
                            </div>
                        </td>
                    `;
                    dataTableBody.appendChild(row);
                });
            }
            
            // æ¸²æŸ“åˆ†é¡µ
            renderPagination(filteredData.length);
        }
        
        // è®¾ç½®åˆ é™¤è®°å½•
        function setDeleteRecord(id) {
            editRecord(id);
            showDeleteModal();
        }
        
        // æ’­æ”¾éŸ³é¢‘
        function playAudio(url) {
            // åœ¨æ–°çª—å£ä¸­æ’­æ”¾éŸ³é¢‘
            const audioWindow = window.open('', '_blank');
            audioWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>æ’­æ”¾éŸ³é »</title>
                    <style>
                        body { margin: 20px; text-align: center; font-family: 'Times New Roman', 'Iansui', serif; }
                        audio { margin: 20px 0; width: 300px; }
                        .container { max-width: 400px; margin: 0 auto; }
                    </style>
                </head>
                <body>
                    <div class="container">
                        <h3>éŸ³é »æ’­æ”¾</h3>
                        <audio controls autoplay>
                            <source src="${url}" type="audio/mpeg">
                            æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æŒéŸ³é »æ’­æ”¾
                        </audio>
                        <br>
                        <button onclick="window.close()" style="padding: 8px 20px; background: #4a6fa5; color: white; border: none; border-radius: 4px; cursor: pointer;">é—œé–‰</button>
                    </div>
                </body>
                </html>
            `);
        }
        
        // æ¸²æŸ“åˆ†é¡µ
        function renderPagination(totalItems) {
            pagination.innerHTML = '';
            
            if (totalPages <= 1) return;
            
            // æ·»åŠ ä¸Šä¸€é¡µæŒ‰é’®
            const prevBtn = document.createElement('button');
            prevBtn.className = 'page-btn';
            prevBtn.textContent = 'â€¹';
            prevBtn.title = 'ä¸Šä¸€é ';
            prevBtn.disabled = currentPage === 1;
            prevBtn.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderDataTable();
                }
            });
            pagination.appendChild(prevBtn);
            
            // æ·»åŠ é¡µç æŒ‰é’®
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(totalPages, startPage + 4);
            
            for (let i = startPage; i <= endPage; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
                pageBtn.textContent = i;
                pageBtn.addEventListener('click', () => {
                    currentPage = i;
                    renderDataTable();
                });
                pagination.appendChild(pageBtn);
            }
            
            // æ·»åŠ ä¸‹ä¸€é¡µæŒ‰é’®
            const nextBtn = document.createElement('button');
            nextBtn.className = 'page-btn';
            nextBtn.textContent = 'â€º';
            nextBtn.title = 'ä¸‹ä¸€é ';
            nextBtn.disabled = currentPage === totalPages;
            nextBtn.addEventListener('click', () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderDataTable();
                }
            });
            pagination.appendChild(nextBtn);
        }
        
        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            const total = dictionaryData.length;
            const withAudio = dictionaryData.filter(item => item.Audio).length;
            const withoutAudio = total - withAudio;
            const audioPercentage = total > 0 ? Math.round(withAudio/total*100) : 0;
            
            // ç»Ÿè®¡åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„è®°å½•
            const specialCharItems = dictionaryData.filter(item => {
                const bvz = item.BVZ || '';
                return /[áº¥Ã£áº«áº£ÄƒÃ¢Ä‘ÃªÃ´Æ¡Æ°]/i.test(bvz);
            });
            
            dataStats.innerHTML = `
                <p>â€¢ ç¸½è¨˜éŒ„æ•¸: <strong>${total}</strong> æ¢</p>
                <p>â€¢ åŒ…å«éŸ³é »: <strong>${withAudio}</strong> æ¢ (${audioPercentage}%)</p>
                <p>â€¢ ç„¡éŸ³é »: <strong>${withoutAudio}</strong> æ¢</p>
                <p>â€¢ ç‰¹æ®Šå­—ç¬¦è¨˜éŒ„: <strong>${specialCharItems.length}</strong> æ¢</p>
            `;
        }
        
        // å¯¼å‡ºä¸ºJSON
        function exportToJson() {
            // å‡†å¤‡å¯¼å‡ºæ•°æ®ï¼ˆå»é™¤å†…éƒ¨IDï¼‰
            const dataToExport = dictionaryData.map(item => ({
                å–®å­—: item.å–®å­—,
                BVZ: item.BVZ,
                Note: item.Note,
                audio: item.Audio
            }));
            
            const jsonString = JSON.stringify(dataToExport, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            const date = new Date().toISOString().split('T')[0];
            a.download = `suixi_dictionary_${date}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            // æ˜¾ç¤ºGitHubä¸Šä¼ æç¤º
            showGitHubUploadInstructions();
        }
        
        // æ˜¾ç¤ºGitHubä¸Šä¼ è¯´æ˜
        function showGitHubUploadInstructions() {
            const username = githubUsernameInput.value.trim() || 'Seing-ji';
            const repo = githubRepoInput.value.trim() || 'BVZ_Audio_for_editing';
            
            // ç»Ÿè®¡æœ‰ç‰¹æ®ŠBVZå­—ç¬¦çš„è®°å½•
            const specialBvzItems = dictionaryData.filter(item => {
                const bvz = item.BVZ || '';
                return /[áº¥Ã£áº«áº£ÄƒÃ¢Ä‘ÃªÃ´Æ¡Æ°]/i.test(bvz);
            });
            
            let specialCharMessage = '';
            if (specialBvzItems.length > 0) {
                specialCharMessage = `\n\nğŸ”¤ ç‰¹æ®Šå­—ç¬¦è™•ç†ï¼š\n   ç³»çµ±ä¿ç•™äº† ${specialBvzItems.length} æ¢è¨˜éŒ„çš„ç‰¹æ®Šå­—ç¬¦\n   éŸ³é »æ–‡ä»¶åç›´æ¥ä½¿ç”¨åŸå§‹å­—ç¬¦\n   ä¾‹å¦‚ï¼šáº¥n.mp3, á»§.mp3, ngá»¯.mp3`;
            }
            
            alert(`âœ… JSONæ–‡ä»¶å·²ç”Ÿæˆï¼ŒåŒ…å« ${dictionaryData.length} æ¢è¨˜éŒ„${specialCharMessage}\n\nğŸ“ ä¸‹ä¸€æ­¥æ“ä½œï¼š\n1. å°‡JSONæ–‡ä»¶ä¸Šå‚³åˆ°å­—å…¸å€‰åº«\n2. æª¢æŸ¥æ‰€æœ‰éŸ³é »URLæ˜¯å¦æ­£ç¢º\n3. å°‡éŸ³é »æ–‡ä»¶ä¸Šå‚³åˆ°ï¼š\n   https://github.com/${username}/${repo}\n\nğŸ“ éŸ³é »æ–‡ä»¶å‘½åï¼š\nâ€¢ ç‰¹æ®Šå­—ç¬¦æ–‡ä»¶åç›´æ¥ä½¿ç”¨åŸå§‹å­—ç¬¦\nâ€¢ ä¾‹å¦‚ï¼šáº¥n.mp3, á»§.mp3, ngá»¯.mp3\nâ€¢ è«‹ç¢ºä¿æ–‡ä»¶ç³»çµ±å’Œæœå‹™å™¨æ”¯æŒé€™äº›ç‰¹æ®Šå­—ç¬¦\nâ€¢ ç¢ºä¿æ–‡ä»¶åèˆ‡URLä¸­çš„ä¸€è‡´`);
        }
        
        // å¯¼å‡ºä¸ºCSV
        function exportToCsv() {
            const headers = ['å–®å­—', 'BVZ', 'Note', 'audio'];
            const csvRows = [
                headers.join(','),
                ...dictionaryData.map(item => [
                    `"${(item.å–®å­— || '').replace(/"/g, '""')}"`,
                    `"${(item.BVZ || '').replace(/"/g, '""')}"`,
                    `"${(item.Note || '').replace(/"/g, '""')}"`,
                    `"${(item.Audio || '').replace(/"/g, '""')}"`
                ].join(','))
            ];
            
            const csvString = csvRows.join('\n');
            const blob = new Blob([csvString], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            const date = new Date().toISOString().split('T')[0];
            a.download = `suixi_dictionary_${date}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert(`CSVæ–‡ä»¶å·²ç”Ÿæˆï¼ŒåŒ…å« ${dictionaryData.length} æ¢è¨˜éŒ„`);
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
        
        // ä½¿å‡½æ•°åœ¨å…¨å±€å¯è®¿é—®ï¼ˆç”¨äºonclickï¼‰
        window.editRecord = editRecord;
        window.setDeleteRecord = setDeleteRecord;
        window.playAudio = playAudio;
    </script>
</body>
</html>